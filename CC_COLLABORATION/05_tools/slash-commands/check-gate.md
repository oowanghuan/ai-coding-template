# /check-gate - æ£€æŸ¥ Phase Gate çŠ¶æ€

ä½ æ˜¯ä¸€ä¸ª AI åä½œå¼€å‘åŠ©æ‰‹ã€‚ç”¨æˆ·è¯·æ±‚æ£€æŸ¥åŠŸèƒ½æ¨¡å—çš„ Phase Gate çŠ¶æ€ã€‚

## å‚æ•°

- `$ARGUMENTS`ï¼šåŠŸèƒ½æ¨¡å—åç§°ï¼Œå¯é€‰å‚æ•° `--phase=N`

## ç”¨æ³•

```
/check-gate {feature-name}              # æ£€æŸ¥æ‰€æœ‰ Phase çš„ Gate
/check-gate {feature-name} --phase=1    # åªæ£€æŸ¥ Phase 1 çš„ Gate
/check-gate {feature-name} --phase=2    # åªæ£€æŸ¥ Phase 2 çš„ Gate
```

## æ‰§è¡Œæ­¥éª¤

### 1. è§£æå‚æ•°

```
å¦‚æœ $ARGUMENTS ä¸ºç©ºï¼Œæç¤ºï¼š
  è¯·æä¾›åŠŸèƒ½åç§°ï¼Œä¾‹å¦‚ï¼š/check-gate user-auth
  æˆ–æŒ‡å®šé˜¶æ®µï¼š/check-gate user-auth --phase=2

è§£æå‚æ•°ï¼š
  feature = ç¬¬ä¸€ä¸ªå‚æ•°
  phase = --phase å‚æ•°å€¼ï¼ˆå¯é€‰ï¼‰
```

### 2. éªŒè¯åŠŸèƒ½æ¨¡å—å­˜åœ¨

```
æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼šdocs/{feature}/
æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
  - docs/{feature}/PHASE_GATE.yaml
  - docs/{feature}/PHASE_GATE_STATUS.yaml

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæç¤ºï¼š
  âŒ åŠŸèƒ½æ¨¡å— "{feature}" æœªå¯ç”¨ Gate æœºåˆ¶

  è¯·å…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ– Gate æ–‡ä»¶ï¼š
  /init-gate {feature}

  æˆ–é‡æ–°åˆ›å»ºåŠŸèƒ½æ¨¡å—ï¼š
  /new-feature {feature}
```

### 3. è¯»å–é…ç½®å’ŒçŠ¶æ€

```yaml
# è¯»å–è§„åˆ™é…ç½®
config = è¯»å– docs/{feature}/PHASE_GATE.yaml

# è¯»å–è¿è¡ŒçŠ¶æ€
status = è¯»å– docs/{feature}/PHASE_GATE_STATUS.yaml

# è·å– feature_profile
feature_profile = config.feature_profile
```

### 4. ç¡®å®šæ£€æŸ¥èŒƒå›´

```
å¦‚æœæŒ‡å®šäº† --phaseï¼š
  åªæ£€æŸ¥è¯¥ phase
å¦åˆ™ï¼š
  æ£€æŸ¥æ‰€æœ‰ phaseï¼ˆphase_1 åˆ° phase_7ï¼‰
```

### 5. è°ƒç”¨ gate_checker skill

å¯¹æ¯ä¸ªéœ€è¦æ£€æŸ¥çš„ Phaseï¼Œä½¿ç”¨ `gate_checker` skill æ‰§è¡Œæ£€æŸ¥ï¼š

```
ä½¿ç”¨ gate_checker skillï¼š
- feature: {feature}
- phase: {phase_number}
```

### 6. æ±‡æ€»è¾“å‡º

#### 6.1 å•ä¸ª Phase æ£€æŸ¥ç»“æœ

```
ğŸ“‹ Phase Gate æ£€æŸ¥ç»“æœ

åŠŸèƒ½æ¨¡å—: {feature}
é˜¶æ®µ: Phase {N} {Name}
æ£€æŸ¥æ—¶é—´: {datetime}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
çŠ¶æ€: {âœ… PASSED | âŒ BLOCKED | â³ PENDING | â­ï¸ SKIPPED}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ å¿…éœ€äº§å‡ºç‰©:
{åˆ—å‡ºæ¯ä¸ª required_output çš„çŠ¶æ€}

ğŸ“Š è´¨é‡æ£€æŸ¥:
{åˆ—å‡ºæ¯ä¸ª quality_check çš„ç»“æœ}

âœï¸ å®¡æ‰¹çŠ¶æ€:
{åˆ—å‡ºæ¯ä¸ªè§’è‰²çš„å®¡æ‰¹çŠ¶æ€}

{å¦‚æœ blocked}
ğŸš« é˜»æ–­åŸå› :
{åˆ—å‡ºé˜»æ–­åŸå› }

ğŸ“ å»ºè®®æ“ä½œ:
{åˆ—å‡ºä¸‹ä¸€æ­¥æ“ä½œ}
```

#### 6.2 å…¨éƒ¨ Phase æ¦‚è§ˆ

```
ğŸ“‹ Phase Gate çŠ¶æ€æ¦‚è§ˆï¼š{feature}

æ£€æŸ¥æ—¶é—´: {datetime}

Phase 1 (Kickoff):  {çŠ¶æ€å›¾æ ‡} {çŠ¶æ€æ–‡å­—}
Phase 2 (Spec):     {çŠ¶æ€å›¾æ ‡} {çŠ¶æ€æ–‡å­—}
Phase 3 (Demo):     {çŠ¶æ€å›¾æ ‡} {çŠ¶æ€æ–‡å­—}
Phase 4 (Design):   {çŠ¶æ€å›¾æ ‡} {çŠ¶æ€æ–‡å­—}
Phase 5 (Code):     {çŠ¶æ€å›¾æ ‡} {çŠ¶æ€æ–‡å­—}
Phase 6 (Test):     {çŠ¶æ€å›¾æ ‡} {çŠ¶æ€æ–‡å­—}
Phase 7 (Deploy):   {çŠ¶æ€å›¾æ ‡} {çŠ¶æ€æ–‡å­—}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å½“å‰é˜»æ–­ç‚¹: {ç¬¬ä¸€ä¸ª blocked çš„ Phaseï¼Œæˆ– "æ— "}
è´£ä»»è§’è‰²: {å¾…å®¡æ‰¹è§’è‰²}

{å¦‚æœæœ‰ blocked}
ğŸ“ å»ºè®®æ“ä½œ:
{åˆ—å‡ºä¿®å¤å»ºè®®}
```

### 7. çŠ¶æ€å›¾æ ‡è¯´æ˜

| çŠ¶æ€ | å›¾æ ‡ | æ–‡å­— |
|------|------|------|
| `passed` | âœ… | Passed |
| `blocked` | âŒ | Blocked |
| `pending` | â³ | Pending |
| `skipped` | â­ï¸ | Skipped |
| å‰ç½®é˜¶æ®µæœªé€šè¿‡ | ğŸ”’ | Locked |

**Locked è§„åˆ™**ï¼šå¦‚æœå‰ä¸€ä¸ªé skipped çš„ Phase æœª passedï¼Œå½“å‰ Phase æ˜¾ç¤ºä¸º Lockedã€‚

## è¾“å‡ºç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæ£€æŸ¥å•ä¸ª Phase

```
/check-gate user-auth --phase=2
```

è¾“å‡ºï¼š

```
ğŸ“‹ Phase Gate æ£€æŸ¥ç»“æœ

åŠŸèƒ½æ¨¡å—: user-auth
é˜¶æ®µ: Phase 2 Spec
æ£€æŸ¥æ—¶é—´: 2024-12-15T11:00:00

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
çŠ¶æ€: âŒ BLOCKED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ å¿…éœ€äº§å‡ºç‰©:
  âœ… 11_UI_FLOW_SPEC.md - å­˜åœ¨

ğŸ“Š è´¨é‡æ£€æŸ¥:
  âœ… spec_has_pages - SPEC åŒ…å«é¡µé¢å®šä¹‰
  âŒ spec_has_error_cases - SPEC æœªå®šä¹‰é”™è¯¯å¤„ç†
  âš ï¸ spec_has_edge_cases - å»ºè®®è¡¥å……è¾¹ç•Œæ¡ä»¶

âœï¸ å®¡æ‰¹çŠ¶æ€:
  âœ… PM: alice (2024-12-15T10:00:00)
  â³ Architect: å¾…å®¡æ‰¹

ğŸš« é˜»æ–­åŸå› :
  1. è´¨é‡æ£€æŸ¥å¤±è´¥: SPEC æœªå®šä¹‰é”™è¯¯å¤„ç†

ğŸ“ å»ºè®®æ“ä½œ:
  1. åœ¨ 11_UI_FLOW_SPEC.md ä¸­æ·»åŠ ã€Œé”™è¯¯å¤„ç†ã€ç« èŠ‚
  2. è¯· Architect å®¡æ‰¹
```

### ç¤ºä¾‹ 2ï¼šæ£€æŸ¥æ‰€æœ‰ Phase

```
/check-gate user-auth
```

è¾“å‡ºï¼š

```
ğŸ“‹ Phase Gate çŠ¶æ€æ¦‚è§ˆï¼šuser-auth

æ£€æŸ¥æ—¶é—´: 2024-12-15T11:00:00

Phase 1 (Kickoff):  âœ… Passed
Phase 2 (Spec):     âŒ Blocked
                    â””â”€ åŸå› : SPEC æœªå®šä¹‰é”™è¯¯å¤„ç†
Phase 3 (Demo):     ğŸ”’ Locked (ç­‰å¾… Phase 2)
Phase 4 (Design):   ğŸ”’ Locked
Phase 5 (Code):     ğŸ”’ Locked
Phase 6 (Test):     ğŸ”’ Locked
Phase 7 (Deploy):   ğŸ”’ Locked

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å½“å‰é˜»æ–­ç‚¹: Phase 2 Spec
è´£ä»»è§’è‰²: Architect

ğŸ“ å»ºè®®æ“ä½œ:
  1. è¡¥å…… 11_UI_FLOW_SPEC.md çš„é”™è¯¯å¤„ç†ç« èŠ‚
  2. æ‰§è¡Œ /approve-gate user-auth --phase=2 --role=Architect
```

### ç¤ºä¾‹ 3ï¼šGate å…¨éƒ¨é€šè¿‡

```
ğŸ“‹ Phase Gate çŠ¶æ€æ¦‚è§ˆï¼šuser-auth

æ£€æŸ¥æ—¶é—´: 2024-12-15T15:00:00

Phase 1 (Kickoff):  âœ… Passed
Phase 2 (Spec):     âœ… Passed
Phase 3 (Demo):     â­ï¸ Skipped (æ—  UI)
Phase 4 (Design):   âœ… Passed
Phase 5 (Code):     âœ… Passed
Phase 6 (Test):     â³ Pending
                    â””â”€ ç­‰å¾…: QA å®¡æ‰¹
Phase 7 (Deploy):   ğŸ”’ Locked

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å½“å‰é˜»æ–­ç‚¹: æ— 
å½“å‰é˜¶æ®µ: Phase 6 Test (ç­‰å¾…å®¡æ‰¹)

ğŸ“ å»ºè®®æ“ä½œ:
  æ‰§è¡Œ /approve-gate user-auth --phase=6 --role=QA
```

## æ³¨æ„äº‹é¡¹

1. **è‡ªåŠ¨æ›´æ–°çŠ¶æ€**ï¼šæ‰§è¡Œæ£€æŸ¥ä¼šè‡ªåŠ¨æ›´æ–° `PHASE_GATE_STATUS.yaml` çš„ `last_check` å­—æ®µ
2. **ä¸ä¿®æ”¹ passed**ï¼šæ­¤å‘½ä»¤ä¸ä¼šå°† `gate_state` è®¾ç½®ä¸º `passed`ï¼Œéœ€è¦ä½¿ç”¨ `/approve-gate`
3. **æ˜¾ç¤ºå†å²**ï¼šå¯ä»¥é€šè¿‡è¯»å– `check_history` æŸ¥çœ‹å†å²æ£€æŸ¥è®°å½•
4. **Locked çŠ¶æ€**ï¼šä¸æ˜¯å®é™…çš„ `gate_state`ï¼Œåªæ˜¯æ˜¾ç¤ºç”¨é€”

## å…³è”å·¥å…·

- `gate_checker` skill - æ­¤å‘½ä»¤çš„æ ¸å¿ƒå®ç°
- `/approve-gate` - åœ¨æ£€æŸ¥é€šè¿‡åå®¡æ‰¹ Gate
- `/next-phase` - åœ¨è¿›å…¥ä¸‹ä¸€é˜¶æ®µå‰è‡ªåŠ¨è°ƒç”¨æ­¤å‘½ä»¤

# test_plan_writer - ç”Ÿæˆæµ‹è¯•è®¡åˆ’

## èƒ½åŠ›æè¿°

æ ¹æ® `11_UI_FLOW_SPEC.md` æˆ– `11_API_SPEC.md`ï¼Œè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„æµ‹è¯•è®¡åˆ’ `40_TEST_PLAN.md`ï¼ŒåŒ…æ‹¬æµ‹è¯•ç”¨ä¾‹ã€æµ‹è¯•æ•°æ®ã€é¢„æœŸç»“æœã€‚

## è¾“å…¥

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| feature | string | æ˜¯ | åŠŸèƒ½æ¨¡å—åç§° |
| test_type | string | å¦ | æµ‹è¯•ç±»å‹ï¼š`ui`, `api`, `unit`, `all`ï¼ˆé»˜è®¤ï¼‰ |
| coverage | string | å¦ | è¦†ç›–ç¨‹åº¦ï¼š`smoke`ï¼ˆå†’çƒŸï¼‰, `standard`ï¼ˆé»˜è®¤ï¼‰, `full`ï¼ˆå…¨é‡ï¼‰ |

## è¾“å‡º

- `docs/{feature}/40_TEST_PLAN.md` - æµ‹è¯•è®¡åˆ’æ–‡æ¡£

## å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  test_plan_writer                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  1. è¯»å– SPEC æ–‡æ¡£                                   â”‚
â”‚     â”œâ”€â”€ 11_UI_FLOW_SPEC.md                          â”‚
â”‚     â””â”€â”€ 11_API_SPEC.md                              â”‚
â”‚     â†“                                                â”‚
â”‚  2. åˆ†ææµ‹è¯•åœºæ™¯                                     â”‚
â”‚     â”œâ”€â”€ æ­£å¸¸æµç¨‹                                    â”‚
â”‚     â”œâ”€â”€ è¾¹ç•Œæ¡ä»¶                                    â”‚
â”‚     â”œâ”€â”€ å¼‚å¸¸å¤„ç†                                    â”‚
â”‚     â””â”€â”€ å®‰å…¨éªŒè¯                                    â”‚
â”‚     â†“                                                â”‚
â”‚  3. ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹                                     â”‚
â”‚     â”œâ”€â”€ UI æµ‹è¯•ç”¨ä¾‹                                 â”‚
â”‚     â”œâ”€â”€ API æµ‹è¯•ç”¨ä¾‹                                â”‚
â”‚     â””â”€â”€ å•å…ƒæµ‹è¯•ç”¨ä¾‹                                â”‚
â”‚     â†“                                                â”‚
â”‚  4. ç”Ÿæˆæµ‹è¯•æ•°æ®                                     â”‚
â”‚     â”œâ”€â”€ æ­£å¸¸æ•°æ®                                    â”‚
â”‚     â””â”€â”€ è¾¹ç•Œæ•°æ®                                    â”‚
â”‚     â†“                                                â”‚
â”‚  5. ç”Ÿæˆæµ‹è¯•è®¡åˆ’æ–‡æ¡£                                 â”‚
â”‚     â””â”€â”€ è°ƒç”¨ doc_generator skill                    â”‚
â”‚     â†“                                                â”‚
â”‚  6. è¾“å‡ºç»“æœ                                         â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è°ƒç”¨çš„ Skills

| Skill | ç”¨é€” |
|-------|------|
| `doc_generator` | ç”Ÿæˆ TEST_PLAN æ–‡æ¡£æ¡†æ¶ |

## æ‰§è¡Œæ­¥éª¤

### 1. è¯»å– SPEC æ–‡æ¡£

ä» SPEC ä¸­æå–æµ‹è¯•ç›¸å…³ä¿¡æ¯ï¼š

```yaml
# ä» UI_FLOW_SPEC æå–
pages:
  - name: LoginPage
    fields: [email, password, remember]
    actions: [submit, forgotPassword, register]
    validations:
      email: [required, email_format]
      password: [required, min_8]
    states: [initial, loading, error, success]
    error_scenarios:
      - code: 401
        message: "è´¦å·æˆ–å¯†ç é”™è¯¯"

# ä» API_SPEC æå–
endpoints:
  - method: POST
    path: /api/auth/login
    params: [email, password]
    responses:
      success: { status: 200, body: { token, user } }
      errors:
        - { status: 401, code: "AUTH_FAILED" }
        - { status: 422, code: "VALIDATION_ERROR" }
```

### 2. ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹

æ ¹æ®è¦†ç›–ç¨‹åº¦ç”Ÿæˆä¸åŒæ•°é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼š

#### Smoke æµ‹è¯•ï¼ˆå†’çƒŸï¼‰
- åªè¦†ç›–æ ¸å¿ƒæ­£å¸¸æµç¨‹
- ç”¨ä¾‹æ•°é‡ï¼š5-10

#### Standard æµ‹è¯•ï¼ˆæ ‡å‡†ï¼‰
- è¦†ç›–æ­£å¸¸æµç¨‹ + ä¸»è¦å¼‚å¸¸
- ç”¨ä¾‹æ•°é‡ï¼š15-25

#### Full æµ‹è¯•ï¼ˆå…¨é‡ï¼‰
- è¦†ç›–æ‰€æœ‰åœºæ™¯åŒ…æ‹¬è¾¹ç•Œæ¡ä»¶
- ç”¨ä¾‹æ•°é‡ï¼š30+

### 3. ç”Ÿæˆæµ‹è¯•è®¡åˆ’æ–‡æ¡£

```markdown
# æµ‹è¯•è®¡åˆ’ - {feature}

> ç‰ˆæœ¬ï¼šv1.0
> åˆ›å»ºæ—¥æœŸï¼š{date}
> è¦†ç›–ç¨‹åº¦ï¼š{coverage}
> é¢„è®¡ç”¨ä¾‹æ•°ï¼š{total_cases}

---

## æµ‹è¯•èŒƒå›´

### æµ‹è¯•ç›®æ ‡
éªŒè¯ {feature} åŠŸèƒ½çš„æ­£ç¡®æ€§ã€ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒã€‚

### æµ‹è¯•ç±»å‹
- [x] UI æµ‹è¯• - ç”¨æˆ·ç•Œé¢äº¤äº’éªŒè¯
- [x] API æµ‹è¯• - æ¥å£åŠŸèƒ½éªŒè¯
- [x] å•å…ƒæµ‹è¯• - æ ¸å¿ƒé€»è¾‘éªŒè¯

### ä¸åœ¨æµ‹è¯•èŒƒå›´
- æ€§èƒ½æµ‹è¯•
- å®‰å…¨æ¸—é€æµ‹è¯•
- å…¼å®¹æ€§æµ‹è¯•

---

## UI æµ‹è¯•ç”¨ä¾‹

### ç™»å½•åŠŸèƒ½

#### TC-UI-001: ç™»å½•æˆåŠŸ
**ä¼˜å…ˆçº§**: P0
**å‰ç½®æ¡ä»¶**: å·²æ³¨å†Œç”¨æˆ· test@example.com / password123

| æ­¥éª¤ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|----------|
| 1 | è®¿é—® /login | æ˜¾ç¤ºç™»å½•é¡µé¢ |
| 2 | è¾“å…¥é‚®ç®± test@example.com | é‚®ç®±å­—æ®µæ˜¾ç¤ºè¾“å…¥å€¼ |
| 3 | è¾“å…¥å¯†ç  password123 | å¯†ç å­—æ®µæ˜¾ç¤ºæ©ç  |
| 4 | ç‚¹å‡»ç™»å½•æŒ‰é’® | æ˜¾ç¤ºåŠ è½½çŠ¶æ€ |
| 5 | ç­‰å¾…å“åº” | è·³è½¬åˆ°é¦–é¡µ /dashboard |

**æµ‹è¯•æ•°æ®**:
```json
{
  "email": "test@example.com",
  "password": "password123"
}
```

---

#### TC-UI-002: ç™»å½•å¤±è´¥ - å¯†ç é”™è¯¯
**ä¼˜å…ˆçº§**: P1
**å‰ç½®æ¡ä»¶**: å·²æ³¨å†Œç”¨æˆ· test@example.com

| æ­¥éª¤ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|----------|
| 1 | è®¿é—® /login | æ˜¾ç¤ºç™»å½•é¡µé¢ |
| 2 | è¾“å…¥é‚®ç®± test@example.com | é‚®ç®±å­—æ®µæ˜¾ç¤ºè¾“å…¥å€¼ |
| 3 | è¾“å…¥é”™è¯¯å¯†ç  wrongpassword | å¯†ç å­—æ®µæ˜¾ç¤ºæ©ç  |
| 4 | ç‚¹å‡»ç™»å½•æŒ‰é’® | æ˜¾ç¤ºåŠ è½½çŠ¶æ€ |
| 5 | ç­‰å¾…å“åº” | æ˜¾ç¤ºé”™è¯¯æç¤º"è´¦å·æˆ–å¯†ç é”™è¯¯" |

---

#### TC-UI-003: è¡¨å•éªŒè¯ - é‚®ç®±æ ¼å¼é”™è¯¯
**ä¼˜å…ˆçº§**: P1

| æ­¥éª¤ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|----------|
| 1 | è¾“å…¥æ— æ•ˆé‚®ç®± invalid-email | æ˜¾ç¤ºéªŒè¯é”™è¯¯"è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±" |
| 2 | ç™»å½•æŒ‰é’® | æŒ‰é’®ç¦ç”¨æˆ–ç‚¹å‡»æ— æ•ˆ |

---

#### TC-UI-004: è¡¨å•éªŒè¯ - å¯†ç å¤ªçŸ­
**ä¼˜å…ˆçº§**: P1

| æ­¥éª¤ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|----------|
| 1 | è¾“å…¥çŸ­å¯†ç  123 | æ˜¾ç¤ºéªŒè¯é”™è¯¯"å¯†ç è‡³å°‘ 8 ä¸ªå­—ç¬¦" |

---

#### TC-UI-005: è®°ä½æˆ‘åŠŸèƒ½
**ä¼˜å…ˆçº§**: P2

| æ­¥éª¤ | æ“ä½œ | é¢„æœŸç»“æœ |
|------|------|----------|
| 1 | å‹¾é€‰"è®°ä½æˆ‘" | å¤é€‰æ¡†è¢«é€‰ä¸­ |
| 2 | ç™»å½•æˆåŠŸ | å­˜å‚¨æŒä¹…åŒ– Token |
| 3 | å…³é—­æµè§ˆå™¨åé‡æ–°è®¿é—® | ä¿æŒç™»å½•çŠ¶æ€ |

---

## API æµ‹è¯•ç”¨ä¾‹

### POST /api/auth/login

#### TC-API-001: ç™»å½•æ¥å£ - æˆåŠŸ
**ä¼˜å…ˆçº§**: P0

**è¯·æ±‚**:
```json
{
  "email": "test@example.com",
  "password": "password123"
}
```

**é¢„æœŸå“åº”**:
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGci...",
    "user": {
      "id": 1,
      "email": "test@example.com",
      "name": "æµ‹è¯•ç”¨æˆ·"
    }
  }
}
```

**æ–­è¨€**:
- çŠ¶æ€ç  = 200
- data.token å­˜åœ¨ä¸”éç©º
- data.user.email = è¯·æ±‚ä¸­çš„ email

---

#### TC-API-002: ç™»å½•æ¥å£ - å¯†ç é”™è¯¯
**ä¼˜å…ˆçº§**: P1

**è¯·æ±‚**:
```json
{
  "email": "test@example.com",
  "password": "wrongpassword"
}
```

**é¢„æœŸå“åº”**:
```json
{
  "code": 401,
  "message": "è´¦å·æˆ–å¯†ç é”™è¯¯"
}
```

---

#### TC-API-003: ç™»å½•æ¥å£ - å‚æ•°ç¼ºå¤±
**ä¼˜å…ˆçº§**: P1

**è¯·æ±‚**:
```json
{
  "email": "test@example.com"
}
```

**é¢„æœŸå“åº”**:
```json
{
  "code": 422,
  "message": "å¯†ç ä¸èƒ½ä¸ºç©º"
}
```

---

## å•å…ƒæµ‹è¯•ç”¨ä¾‹

### éªŒè¯å‡½æ•°æµ‹è¯•

#### TC-UNIT-001: validateEmail - æœ‰æ•ˆé‚®ç®±
```typescript
expect(validateEmail('test@example.com')).toBe(true)
expect(validateEmail('user.name@domain.co.uk')).toBe(true)
```

#### TC-UNIT-002: validateEmail - æ— æ•ˆé‚®ç®±
```typescript
expect(validateEmail('invalid')).toBe(false)
expect(validateEmail('test@')).toBe(false)
expect(validateEmail('@domain.com')).toBe(false)
```

#### TC-UNIT-003: validatePassword - æœ‰æ•ˆå¯†ç 
```typescript
expect(validatePassword('password123')).toBe(true)
expect(validatePassword('12345678')).toBe(true)
```

#### TC-UNIT-004: validatePassword - æ— æ•ˆå¯†ç 
```typescript
expect(validatePassword('123')).toBe(false)  // å¤ªçŸ­
expect(validatePassword('')).toBe(false)     // ç©º
```

---

## æµ‹è¯•æ•°æ®

### ç”¨æˆ·æ•°æ®

| é‚®ç®± | å¯†ç  | ç”¨é€” |
|------|------|------|
| test@example.com | password123 | æ­£å¸¸ç”¨æˆ· |
| admin@example.com | admin123456 | ç®¡ç†å‘˜ |
| locked@example.com | password123 | è¢«é”å®šç”¨æˆ· |

### è¾¹ç•Œæ•°æ®

| åœºæ™¯ | æ•°æ® |
|------|------|
| æœ€çŸ­æœ‰æ•ˆå¯†ç  | 12345678ï¼ˆ8 ä½ï¼‰ |
| æœ€é•¿æœ‰æ•ˆå¯†ç  | a*128ï¼ˆ128 ä½ï¼‰ |
| ç‰¹æ®Šå­—ç¬¦é‚®ç®± | user+tag@example.com |

---

## æµ‹è¯•ç¯å¢ƒ

| é¡¹ç›® | é…ç½® |
|------|------|
| æµè§ˆå™¨ | Chrome æœ€æ–°ç‰ˆ |
| æ“ä½œç³»ç»Ÿ | macOS / Windows |
| å‰ç«¯åœ°å€ | http://localhost:3000 |
| API åœ°å€ | http://localhost:8080 |
| æ•°æ®åº“ | æµ‹è¯•ç¯å¢ƒ PostgreSQL |

---

## æµ‹è¯•è¿›åº¦è¿½è¸ª

| æµ‹è¯•ç±»å‹ | æ€»æ•° | é€šè¿‡ | å¤±è´¥ | å¾…æ‰§è¡Œ |
|---------|------|------|------|--------|
| UI æµ‹è¯• | 10 | 0 | 0 | 10 |
| API æµ‹è¯• | 8 | 0 | 0 | 8 |
| å•å…ƒæµ‹è¯• | 6 | 0 | 0 | 6 |
| **åˆè®¡** | **24** | **0** | **0** | **24** |

---

_Generated by test_plan_writer | {datetime}_
```

### 4. è¾“å‡ºç»“æœ

```
âœ… æµ‹è¯•è®¡åˆ’ç”ŸæˆæˆåŠŸ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“„ ç”Ÿæˆçš„æ–‡æ¡£
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ docs/{feature}/40_TEST_PLAN.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š æµ‹è¯•ç”¨ä¾‹ç»Ÿè®¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ UI æµ‹è¯•: 10 ä¸ª
â€¢ API æµ‹è¯•: 8 ä¸ª
â€¢ å•å…ƒæµ‹è¯•: 6 ä¸ª
â€¢ æ€»è®¡: 24 ä¸ª

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ è¦†ç›–æƒ…å†µ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ é¡µé¢è¦†ç›–: 100%
â€¢ API è¦†ç›–: 100%
â€¢ ç”¨æˆ·æ•…äº‹è¦†ç›–: 100%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¡ ä¸‹ä¸€æ­¥ï¼š
1. äººå·¥è¯„å®¡æµ‹è¯•è®¡åˆ’
2. å‡†å¤‡æµ‹è¯•æ•°æ®
3. ä½¿ç”¨ /run-tests æ‰§è¡Œæµ‹è¯•
```

## ç¤ºä¾‹

### ç¤ºä¾‹è¾“å…¥

```
è¯·ä½¿ç”¨ test_plan_writer subagentï¼š
- feature: user-auth
- test_type: all
- coverage: standard
```

### ç¤ºä¾‹è¾“å‡º

ç”ŸæˆåŒ…å« UIã€APIã€å•å…ƒæµ‹è¯•çš„å®Œæ•´æµ‹è¯•è®¡åˆ’ã€‚

## æ³¨æ„äº‹é¡¹

1. **SPEC ä¾èµ–**ï¼šå¿…é¡»å…ˆæœ‰å®Œæ•´çš„ SPEC æ–‡æ¡£
2. **ä¼˜å…ˆçº§åˆ†é…**ï¼šP0 æ˜¯å¿…æµ‹ï¼ŒP1 æ˜¯é‡è¦ï¼ŒP2 æ˜¯å¯é€‰
3. **æµ‹è¯•æ•°æ®**ï¼šæä¾›çš„æµ‹è¯•æ•°æ®éœ€è¦ä¸æµ‹è¯•ç¯å¢ƒåŒ¹é…
4. **äººå·¥è¯„å®¡**ï¼šç”Ÿæˆçš„è®¡åˆ’éœ€è¦æµ‹è¯•äººå‘˜è¯„å®¡

## å…³è”å·¥å…·

- `spec_validator` - éªŒè¯ SPEC å®Œæ•´æ€§
- `test_runner` - æ‰§è¡Œæµ‹è¯•è®¡åˆ’
- `test_report_generator` - ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š

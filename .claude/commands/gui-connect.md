# /gui-connect - è¿æ¥ GUI æ§åˆ¶å°

ä½ æ˜¯ä¸€ä¸ª AI åä½œå¼€å‘åŠ©æ‰‹ã€‚ç”¨æˆ·è¯·æ±‚è¿æ¥åˆ° Coding GUI æ§åˆ¶å°ï¼Œä»¥ä¾¿æ¥æ”¶æ¥è‡ª GUI çš„å‘½ä»¤ã€‚

## è§¦å‘æ–¹å¼

ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è§¦å‘ï¼š
- `/gui-connect`
- "è¿æ¥ GUI"
- "å¼€å¯ GUI æ¨¡å¼"

## åŠŸèƒ½è¯´æ˜

æ­¤å‘½ä»¤å°†å½“å‰ CLI ç»ˆç«¯æ³¨å†Œä¸ºä¸€ä¸ª GUI Sessionï¼Œä½¿å¾— Coding GUI å¯ä»¥ï¼š
1. å‘ç°å¹¶æ˜¾ç¤ºæ­¤ CLI ç»ˆç«¯
2. å‘æ­¤ç»ˆç«¯å‘é€å‘½ä»¤
3. ç›‘æ§ç»ˆç«¯çŠ¶æ€

## æ‰§è¡Œæ­¥éª¤

### 1. æ£€æŸ¥ç¯å¢ƒ

ç¡®è®¤å½“å‰ç›®å½•æ˜¯æœ‰æ•ˆçš„é¡¹ç›®ç›®å½•ï¼ˆå­˜åœ¨ `.claude/` ç›®å½•ï¼‰ã€‚

### 2. åˆ›å»º Session ç›®å½•

å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»º `.claude/gui-sessions/` ç›®å½•ï¼š

```bash
mkdir -p .claude/gui-sessions
chmod 700 .claude/gui-sessions
```

### 3. ç”Ÿæˆ Session ä¿¡æ¯

ç”Ÿæˆå”¯ä¸€çš„ Session IDï¼ˆ8 ä½éšæœºå­—ç¬¦ï¼‰å¹¶åˆ›å»º Session æ–‡ä»¶ï¼š

**æ–‡ä»¶è·¯å¾„**: `.claude/gui-sessions/session-{id}.json`

**æ–‡ä»¶å†…å®¹**:
```json
{
  "id": "{8ä½éšæœºID}",
  "pid": {å½“å‰è¿›ç¨‹ID},
  "createdAt": "{ISO8601æ—¶é—´æˆ³}",
  "lastActiveAt": "{ISO8601æ—¶é—´æˆ³}",
  "heartbeatAt": "{ISO8601æ—¶é—´æˆ³}",
  "terminal": {
    "type": "console",
    "platform": "{darwin|win32|linux}",
    "title": "claude - {é¡¹ç›®å}"
  },
  "status": "active",
  "projectPath": "{å½“å‰é¡¹ç›®è·¯å¾„}"
}
```

**æ–‡ä»¶æƒé™**: `0600`ï¼ˆä»…ç”¨æˆ·å¯è¯»å†™ï¼‰

### 4. æ˜¾ç¤ºè¿æ¥ä¿¡æ¯

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”— GUI è¿æ¥å·²å»ºç«‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Session ID: {id}
çŠ¶æ€: âœ… æ´»è·ƒ
é¡¹ç›®è·¯å¾„: {projectPath}

ğŸ“¡ æ­£åœ¨ç›‘å¬ GUI å‘½ä»¤...
   å‘½ä»¤æ–‡ä»¶: .claude/gui-sessions/session-{id}.cmd

ğŸ’¡ æç¤ºï¼š
â€¢ GUI ç°åœ¨å¯ä»¥å‘ç°å¹¶è¿æ¥åˆ°æ­¤ç»ˆç«¯
â€¢ ä½¿ç”¨ /gui-disconnect æ–­å¼€è¿æ¥
â€¢ å…³é—­ç»ˆç«¯ä¼šè‡ªåŠ¨æ¸…ç† Session
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### 5. å¯åŠ¨ç›‘å¬æœºåˆ¶

**æ³¨æ„**: è¿™ä¸€æ­¥éœ€è¦ç”± Claude Code çš„ hooks æˆ–åå°æœºåˆ¶å®ç°ã€‚

ç›‘å¬ `.claude/gui-sessions/session-{id}.cmd` æ–‡ä»¶çš„å˜åŒ–ï¼š
- å½“æ–‡ä»¶è¢«ä¿®æ”¹æ—¶ï¼Œè¯»å–å‘½ä»¤å†…å®¹
- æ£€æŸ¥å‘½ä»¤çš„ `cmdId` æ˜¯å¦å·²æ‰§è¡Œï¼ˆå¹‚ç­‰æ€§ï¼‰
- å†™å…¥ ACK ç¡®è®¤æ–‡ä»¶
- æ‰§è¡Œå‘½ä»¤
- å†™å…¥æ‰§è¡Œç»“æœæ–‡ä»¶

### 6. å¯åŠ¨å¿ƒè·³æ›´æ–°

æ¯ 30 ç§’æ›´æ–° Session æ–‡ä»¶ä¸­çš„ `heartbeatAt` å­—æ®µï¼Œä»¥ä¾¿ GUI æ£€æµ‹ Session æ˜¯å¦ä»ç„¶æ´»è·ƒã€‚

## é€šä¿¡åè®®

### å‘½ä»¤æ–‡ä»¶æ ¼å¼ (.cmd)

```json
{
  "cmdId": "cmd-uuid-123",
  "timestamp": "2024-12-18T15:30:00.000Z",
  "command": "/start-day",
  "source": "gui-button",
  "context": {
    "phaseId": 5,
    "featureId": "coding-GUI",
    "stepId": "start-day"
  }
}
```

### ACK ç¡®è®¤æ–‡ä»¶æ ¼å¼ (.ack)

```json
{
  "cmdId": "cmd-uuid-123",
  "status": "received",
  "timestamp": "2024-12-18T15:30:01.000Z"
}
```

### æ‰§è¡Œç»“æœæ–‡ä»¶æ ¼å¼ (.result)

```json
{
  "cmdId": "cmd-uuid-123",
  "status": "success",
  "timestamp": "2024-12-18T15:30:05.000Z",
  "duration": 4000,
  "output": "å‘½ä»¤æ‰§è¡Œå®Œæˆ",
  "error": null
}
```

## é”™è¯¯å¤„ç†

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| ç›®å½•åˆ›å»ºå¤±è´¥ | æ˜¾ç¤ºé”™è¯¯ï¼Œæç¤ºæ£€æŸ¥æƒé™ |
| Session æ–‡ä»¶å·²å­˜åœ¨ | æ£€æŸ¥æ˜¯å¦ä¸ºåƒµå°¸ Sessionï¼Œè‹¥æ˜¯åˆ™æ¸…ç†å¹¶é‡æ–°åˆ›å»º |
| æƒé™è®¾ç½®å¤±è´¥ | æ˜¾ç¤ºè­¦å‘Šï¼Œç»§ç»­è¿è¡Œ |
| å‘½ä»¤æ–‡ä»¶è¯»å–å¤±è´¥ | è®°å½•é”™è¯¯ï¼Œç­‰å¾…ä¸‹æ¬¡è§¦å‘ |

## æ³¨æ„äº‹é¡¹

- Session ID ä½¿ç”¨éšæœºç”Ÿæˆï¼Œç¡®ä¿å”¯ä¸€æ€§
- æ‰€æœ‰æ—¶é—´æˆ³ä½¿ç”¨ ISO 8601 æ ¼å¼
- æ–‡ä»¶æƒé™ä¸¥æ ¼è®¾ç½®ä¸º 0600ï¼Œé˜²æ­¢å…¶ä»–ç”¨æˆ·è¯»å–
- è¿›ç¨‹é€€å‡ºæ—¶è‡ªåŠ¨æ¸…ç† Session æ–‡ä»¶
- æ”¯æŒå¤šä¸ª CLI ç»ˆç«¯åŒæ—¶è¿æ¥ï¼ˆä¸åŒ Session IDï¼‰

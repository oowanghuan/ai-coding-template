# design_from_demo - ä» Demo åæ¨ API å¥‘çº¦

## èƒ½åŠ›æè¿°

ä» Demo ä¸­ä½¿ç”¨çš„ Mock API åå‘æ¨å¯¼å‡ºæ­£å¼çš„ API å¥‘çº¦ï¼Œç”Ÿæˆ `40_DESIGN_FINAL.md` ä¸­çš„ API éƒ¨åˆ†ã€‚è¿™åœ¨ Demo å…ˆè¡Œçš„å¼€å‘æ¨¡å¼ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚

## è¾“å…¥

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| feature | string | æ˜¯ | åŠŸèƒ½æ¨¡å—åç§° |
| mock_path | string | å¦ | Mock API è·¯å¾„ï¼Œé»˜è®¤ `playgrounds/{feature}/mock/api.js` |
| output | string | å¦ | è¾“å‡ºæ–¹å¼ï¼š`design`ï¼ˆæ›´æ–° DESIGNï¼‰ï¼Œ`standalone`ï¼ˆç‹¬ç«‹æ–‡ä»¶ï¼‰ |

## è¾“å‡º

- API å¥‘çº¦å®šä¹‰
- æ•°æ®æ¨¡å‹å®šä¹‰
- ä¸ Mock API çš„å¯¹ç…§è¡¨

## æ‰§è¡Œæ­¥éª¤

### 1. è¯»å– Mock API

```javascript
// è¯»å– playgrounds/{feature}/mock/api.js
// æå–æ‰€æœ‰ mock å‡½æ•°åŠå…¶ç­¾å
```

### 2. åˆ†æ Mock å‡½æ•°

ä» Mock ä»£ç ä¸­æå–ï¼š

```yaml
mock_analysis:
  - function: mockLogin
    inferred_endpoint:
      method: POST
      path: /api/auth/login
    request:
      body:
        email: string    # ä»å‚æ•°æ¨æ–­
        password: string
    response:
      success:
        token: string
        user:
          id: number
          email: string
          name: string
      errors:
        - code: 401
          message: "é‚®ç®±æˆ–å¯†ç é”™è¯¯"
```

### 3. ç”Ÿæˆ API å¥‘çº¦

```markdown
## API å¥‘çº¦

### POST /api/auth/login

ç™»å½•æ¥å£

**è¯·æ±‚**

| å‚æ•° | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| email | string | æ˜¯ | ç”¨æˆ·é‚®ç®± |
| password | string | æ˜¯ | ç”¨æˆ·å¯†ç  |

**æˆåŠŸå“åº”** (200)

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": 1,
      "email": "user@example.com",
      "name": "ç”¨æˆ·å"
    }
  }
}
```

**é”™è¯¯å“åº”**

| çŠ¶æ€ç  | é”™è¯¯ç  | è¯´æ˜ |
|--------|--------|------|
| 401 | AUTH_FAILED | é‚®ç®±æˆ–å¯†ç é”™è¯¯ |
| 422 | VALIDATION_ERROR | å‚æ•°éªŒè¯å¤±è´¥ |
```

### 4. ç”Ÿæˆæ•°æ®æ¨¡å‹

```markdown
## æ•°æ®æ¨¡å‹

### User

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| id | number | æ˜¯ | ç”¨æˆ· ID |
| email | string | æ˜¯ | é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰ |
| name | string | æ˜¯ | ç”¨æˆ·å |
| password | string | æ˜¯ | å¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰ |
| created_at | datetime | æ˜¯ | åˆ›å»ºæ—¶é—´ |
| updated_at | datetime | æ˜¯ | æ›´æ–°æ—¶é—´ |

### Token

| å­—æ®µ | ç±»å‹ | å¿…éœ€ | è¯´æ˜ |
|------|------|------|------|
| token | string | æ˜¯ | JWT Token |
| user_id | number | æ˜¯ | å…³è”ç”¨æˆ· ID |
| expires_at | datetime | æ˜¯ | è¿‡æœŸæ—¶é—´ |
```

### 5. ç”Ÿæˆå¯¹ç…§è¡¨

```markdown
## Mock â†’ API å¯¹ç…§è¡¨

| Mock å‡½æ•° | æ­£å¼ API | éªŒè¯çŠ¶æ€ |
|-----------|----------|----------|
| mockLogin | POST /api/auth/login | âœ… ä¸€è‡´ |
| mockRegister | POST /api/auth/register | âœ… ä¸€è‡´ |
| mockGetCurrentUser | GET /api/auth/me | âš ï¸ Mock ç¼ºå°‘ token å‚æ•° |
| mockLogout | POST /api/auth/logout | âœ… ä¸€è‡´ |

### å·®å¼‚è¯´æ˜

1. **mockGetCurrentUser**
   - Mockï¼šç›´æ¥ä¼ é€’ token å‚æ•°
   - æ­£å¼ï¼šåº”ä» Header ä¸­è·å– `Authorization: Bearer {token}`
   - å»ºè®®ï¼šæ›´æ–° Mock ä»¥åŒ¹é…æ­£å¼å®ç°
```

### 6. è¾“å‡ºç»“æœ

```
âœ… API å¥‘çº¦ç”ŸæˆæˆåŠŸ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ åˆ†æçš„ Mock API
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ¥æºï¼šplaygrounds/user-auth/mock/api.js
å‡½æ•°æ•°é‡ï¼š4

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“„ ç”Ÿæˆçš„ API
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ POST /api/auth/login
â€¢ POST /api/auth/register
â€¢ GET /api/auth/me
â€¢ POST /api/auth/logout

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š æ•°æ®æ¨¡å‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ Userï¼ˆ6 å­—æ®µï¼‰
â€¢ Tokenï¼ˆ3 å­—æ®µï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ éœ€è¦æ³¨æ„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â€¢ 1 ä¸ªå·®å¼‚éœ€è¦ç¡®è®¤

ğŸ’¡ ä¸‹ä¸€æ­¥ï¼š
1. ç¡®è®¤ API å¥‘çº¦æ˜¯å¦ç¬¦åˆé¢„æœŸ
2. æ›´æ–° Mock API ä»¥æ¶ˆé™¤å·®å¼‚
3. å°†å¥‘çº¦åˆå¹¶åˆ° 40_DESIGN_FINAL.md
```

## ç¤ºä¾‹

### ç¤ºä¾‹è¾“å…¥

```
è¯·ä½¿ç”¨ design_from_demo skillï¼š
- feature: user-auth
- output: design
```

### ç¤ºä¾‹è¾“å‡º

è‡ªåŠ¨æ›´æ–° `docs/user-auth/40_DESIGN_FINAL.md` çš„ API å¥‘çº¦éƒ¨åˆ†ã€‚

## æ³¨æ„äº‹é¡¹

1. **Mock è´¨é‡**ï¼šè¾“å‡ºè´¨é‡å–å†³äº Mock API çš„å®Œæ•´æ€§
2. **ç±»å‹æ¨æ–­**ï¼šä» Mock æ•°æ®æ¨æ–­ç±»å‹ï¼Œå¯èƒ½ä¸å®Œå…¨å‡†ç¡®
3. **é”™è¯¯åœºæ™¯**ï¼šç¡®ä¿ Mock è¦†ç›–äº†æ‰€æœ‰é”™è¯¯åœºæ™¯
4. **å‘½åè§„èŒƒ**ï¼šç”Ÿæˆçš„ API è·¯å¾„éµå¾ª `02_API_CONVENTIONS.md`

## å…³è”å·¥å…·

- `mock_api_generator` - ç”Ÿæˆ Mock API
- `ui_demo` - ç”Ÿæˆ Demo
- `review_alignment` - éªŒè¯å®ç°ä¸è®¾è®¡ä¸€è‡´æ€§
